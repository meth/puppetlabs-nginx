user <%= nx_daemon_user %>;
worker_processes <%= worker_processes %>;

error_log  <%= nx_logdir %>/error.log;
pid        <%= nx_pid %>;

events {
  worker_connections <%= worker_connections %>;
  <% if nx_multi_accept == 'on' %>multi_accept on;<% end %>
}

http {
  include       /etc/nginx/mime.types;
  default_type  application/octet-stream;

  access_log  <%= nx_logdir %>/access.log;

  sendfile    <%= nx_sendfile %>;

  <% if nx_tcp_nopush == 'on' %>
  tcp_nopush  on;
  <% end %>

  keepalive_timeout  <%= nx_keepalive_timeout %>;
  tcp_nodelay        <%= nx_tcp_nodelay %>;

  <% if nx_gzip == 'on' %>
  gzip         on;
  gzip_disable "MSIE [1-6]\.(?!.*SV1)";
  <% end %>

  include /etc/nginx/conf.d/*.conf;

<% if extra_options %>
  <% extra_options.each do |key, value| %>
    <%= key %> <%= value %>;
  <% end %>
<% end %>
}
